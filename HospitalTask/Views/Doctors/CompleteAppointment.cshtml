@{
    ViewData["Title"] = "Complete Appointment";
}
<h1>Complete Appointment with Doctor Name</h1>
@if (TempData["Error"] != null)
{
    <div class="alert alert-danger">@TempData["Error"]</div>
}

<form id="appointmentForm" method="post" action="CompleteAppointment">
    <input type="hidden" name="doctorId" value="@ViewBag.DoctorId" />

    <div class="form-group">
        <label for="patientName">Patient Name:</label>
        <input type="text" class="form-control" id="patientName" name="patientName">
    </div>
    <div class="form-group">
        <label for="myDate">Appointment Date:</label>
        <input type="date" class="form-control" id="myDate" name="myDate">
    </div>
    <div class="form-group">
        <label for="myTime">Appointment Time:</label>
        <input type="time" class="form-control" id="myTime" name="myTime">
    </div>
    <br />
    <button type="submit" class="btn btn-primary" id="submitBtn">Complete Appointment</button>
</form>

<!-- Success Modal -->
@*<div class="modal fade" id="successModal" tabindex="-1" aria-labelledby="successModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="successModalLabel">Appointment Completed</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>Your appointment has been successfully completed. Thank you!</p>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        var appointmentForm = document.getElementById('appointmentForm');
        appointmentForm.addEventListener('submit', function (e) {
            // Show the success modal after form submission
            var myModal = new bootstrap.Modal(document.getElementById('successModal'), {
                backdrop: 'static',
                keyboard: false
            });
            myModal.show();
            // Prevent the default form submission
            e.preventDefault();
        });
    });
</script>
*@



@* @section Scripts {
    <script>
        flatpickr("#myCalendar", {
            dateFormat: "Y-m-d",
            enable: [
                function(date) {
                    // Sunday = 0, Tuesday = 2
                    return (date.getDay() === 0 || date.getDay() === 2);
                }
            ]
        });
    </script> *@
}
 
@section Scripts {
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // التاريخ: الأحد والثلاثاء فقط
            flatpickr("#myDate", {
                dateFormat: "Y-m-d",
                enable: [
                    function(date) {
                        return (date.getDay() === 0 || date.getDay() === 2);
                    }
                ]
            });

            // الوقت: من 8 صباحًا ل 5 مساءا
                    flatpickr("#myTime", {
            enableTime: true,
            noCalendar: true,
            dateFormat: "H:i",
            minTime: "08:00",
            maxTime: "17:00",  // صححت الوقت ل 5 مساءً
            minuteIncrement: 30
        });

        });
    </script>
}


